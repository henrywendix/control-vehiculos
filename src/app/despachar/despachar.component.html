<!--vh: altura, vw: ancho --->
<!-- Diálogo DM -->
<p-dialog [header]="modoVisualizacion ? 'Detalle de Despacho DM' : 'Despacho DM'"
          [(visible)]="mostrarDM" [modal]="true" [style]="{ width: '50vw' }">
          <div class="p-field" *ngIf="!modoVisualizacion">
            <label for="vinFilter">Buscar VIN registrado</label>
            <p-listbox [options]="vinsRegistrados" [(ngModel)]="vinSeleccionado"
                       optionLabel="vin" [filter]="true" [multiple]="false"
                       (onChange)="seleccionarVin($event)" class="w-full">
              <ng-template let-item pTemplate="item">
                <div>{{item.vin}} - {{item.marca}} {{item.anio}}</div>
              </ng-template>
            </p-listbox>
          </div><br>
  <div class="p-fluid" style="padding-bottom: 2rem;">
    <div class="p-field">
      <label for="vin">VIN</label>
      <input id="vin" pInputText [(ngModel)]="despachoDM.vin" [readonly]="modoVisualizacion" required>
    </div><br>
    <div class="field">
      <label for="bl">N° de BL</label>
      <input id="bl" pInputText [(ngModel)]="despachoDM.bl" [readonly]="modoVisualizacion" required>
    </div><br>
    <div class="field">
      <label for="duca">DUCA</label>
      <input id="duca" pInputText [(ngModel)]="despachoDM.duca" [readonly]="modoVisualizacion" required>
    </div>
  </div>
  <ng-template pTemplate="footer">
    <p-button label="Cancelar" icon="pi pi-times" (click)="mostrarDM = false"></p-button>
    <p-button *ngIf="!modoVisualizacion" label="Guardar" icon="pi pi-check" (click)="guardarDM()"></p-button>
  </ng-template>
</p-dialog>

<!-- Diálogo TRANSITO -->
<p-dialog [header]="modoVisualizacion ? 'Detalle de Despacho TRANSITO' : 'Despacho TRANSITO'"
          [(visible)]="mostrarTransito" [modal]="true" [style]="{ width: '50vw' }">
          <div class="p-field" *ngIf="!modoVisualizacion">
            <label for="vinFilter">Buscar VIN registrado</label>
            <p-listbox [options]="vinsRegistrados" [(ngModel)]="vinSeleccionado"
                       optionLabel="vin" [filter]="true" [multiple]="false"
                       (onChange)="seleccionarVin($event)" class="w-full">
              <ng-template let-item pTemplate="item">
                <div>{{item.vin}} - {{item.marca}} {{item.anio}}</div>
              </ng-template>
            </p-listbox>
          </div><br>
  <div class="p-fluid" style="padding-bottom: 2rem;">
    <div class="p-field">
      <label for="vin">VIN</label>
      <input id="vin" pInputText [(ngModel)]="despachoTransito.vin" [readonly]="modoVisualizacion" required>
    </div><br>
    <div class="field">
      <label for="copiaBL">Copia de BL</label>
      <input id="copiaBL" pInputText [(ngModel)]="despachoTransito.copiaBL" [readonly]="modoVisualizacion" required>
    </div><br>
    <div class="field">
      <label for="ducaTransito">DUCA</label>
      <input id="ducaTransito" pInputText [(ngModel)]="despachoTransito.duca" [readonly]="modoVisualizacion" required>
    </div><br>
    <div class="field">
      <label for="tarja">Copia de Tarja</label>
      <input id="tarja" pInputText [(ngModel)]="despachoTransito.tarja" [readonly]="modoVisualizacion" required>
    </div>
  </div>
  <ng-template pTemplate="footer">
    <p-button label="Cancelar" icon="pi pi-times" (click)="mostrarTransito = false"></p-button>
    <p-button *ngIf="!modoVisualizacion" label="Guardar" icon="pi pi-check" (click)="guardarTransito()"></p-button>
  </ng-template>
</p-dialog>

<!-- Botones principales (solo para modo edición) -->
<div *ngIf="!modoVisualizacion" class="flex flex-column gap-3 p-4">
  <div class="mr-2">
    <p-button label="DM" icon="pi pi-file" (click)="seleccionarTipo('DM')"
              styleClass="p-button-outlined mr-2"></p-button>
    <p-button label="TRANSITO" icon="pi pi-sync" (click)="seleccionarTipo('TRANSITO')"
              styleClass="p-button-outlined mr-2"></p-button>
  </div>
</div>
